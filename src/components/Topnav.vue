<template>
  <Sticky class="mb-4">
    <nav id="topnav" class="width-full header-bg">
      <Container>
        <div class="d-flex flex-items-center" style="height: 78px;">
          <div class="flex-auto d-flex flex-items-center">
            <router-link
              :to="{ name: 'home' }"
              class="d-inline-block d-flex flex-items-center"
              style="font-size: 24px; padding-top: 4px;"
            >
         <svg viewBox="0 0 20 20" class="sc-bdfBwQ gKDaFw mobile-icon" fill="#1c1c1d" color="text" width="20px" xmlns="http://www.w3.org/2000/svg"><g id="LOGO-for-DEX" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Group-3" transform="translate(1.000000, 1.000000)"><g id="Group-2"><g id="Group-4"><g id="Screen-Shot-2021-02-24-at-7.46.06-PM-stroke-and-fill" transform="translate(20.303293, 2.028169)"><g id="Group"><g id="p3-link" fill="#FFE803"><path d="M48.5198049,9.27987365 C48.0152116,9.10250435 47.4866822,8.99233911 46.9549744,8.92250454 C46.8239768,8.91416748 46.6995497,8.92083713 46.5697841,8.89707651 C46.3890978,8.86372828 46.1923961,8.87581702 46.0084246,8.87373275 C45.8240424,8.87623387 45.6285727,8.86372828 45.4470651,8.89624281 C45.3033373,8.92333825 45.1653587,8.91291692 45.020399,8.9245888 C44.9034162,8.94111174 44.7868236,8.95952889 44.6707202,8.98007921 C44.6707543,8.37306877 44.6708377,7.76608363 44.6710413,7.15916027 C44.6703516,6.98477138 44.6648336,6.81109138 44.6586258,6.63741139 C44.2668472,6.64095588 43.8743788,6.64095588 43.4826002,6.63528469 C43.4694949,5.56981109 43.4694949,4.49653962 43.4832899,3.43177491 C43.8750686,3.42539483 44.2668472,3.42468594 44.6593156,3.42893932 C44.6834569,2.71224351 44.6648336,1.993421 44.6710413,1.27601629 C44.6786286,0.891793605 44.6365538,0.474961618 44.7200137,0.102081303 C45.9732915,0.0871944463 47.2279487,0.0971190174 48.4819163,0.0978279154 C48.5384759,0.446605701 48.5198526,0.783332221 48.5198526,1.1342367 C48.5191628,1.87361725 48.5212321,2.6129978 48.5184731,3.35237835 C49.2275372,3.40058341 49.9414296,3.35592284 50.652563,3.37789867 C50.6691171,4.47739937 50.6691171,5.58895134 50.652563,6.68916094 C49.9421194,6.71113677 49.228227,6.66576731 48.5191628,6.71468126 C48.5196924,7.56965431 48.5198154,8.4247318 48.5198049,9.27987365 Z M43.0499196,9.44716817 C43.0475144,9.44819061 43.0451096,9.44921465 43.0427053,9.45024028 C42.5396582,9.67534083 42.066178,9.96963896 41.7076799,10.3998311 C41.4723771,10.6932955 41.2962079,11.0951417 41.3569842,11.4794801 C41.4128327,11.74043 41.5302788,11.9822046 41.7002882,12.1864625 C41.8128065,12.3223566 41.9187544,12.4461619 41.9696751,12.6204064 C42.0164893,12.7571341 41.9992419,12.9209573 42.0021165,13.0656053 C42.0019349,13.2575979 42.0017934,13.4495905 42.0016844,13.6415838 C41.9809855,13.6590109 41.960069,13.6761761 41.9389372,13.6930726 C41.4347291,14.0921821 40.8939642,14.426073 40.276637,14.6018797 C39.6241324,14.8145491 38.9585226,14.8662986 38.281187,14.9180482 C37.1858622,14.8875656 36.1174377,14.6989987 35.1083319,14.2467218 C34.7103455,14.0482304 34.3123591,13.84265 33.9240292,13.6250184 C33.9971428,13.398171 34.0868105,13.1876283 34.2006194,12.9799212 C34.5634285,12.2965436 34.8738165,11.5692143 35.2918057,10.9191549 C36.0257008,11.3955343 36.7989118,11.7577812 37.6569622,11.9208277 C37.9749375,11.960526 38.3480929,11.9647794 38.6660681,11.9335879 C38.9895614,11.883965 39.3406447,11.6670423 39.4199661,11.3203912 C39.4599717,11.0467566 39.4599717,10.6873453 39.1833815,10.5413123 C38.6943479,10.2953247 38.13427,10.1712676 37.6052309,10.0500461 C36.8216736,9.86856819 35.9739695,9.58642681 35.3911298,8.99166144 C34.9952127,8.51457313 34.703448,7.8687671 34.7193122,7.23288566 C34.720002,6.78060877 34.6924119,6.36023229 34.8310519,5.92355116 C35.0490133,5.11044523 35.5663266,4.40721848 36.2133131,3.90035645 C36.9472083,3.37435418 37.8769928,3.10355517 38.760564,3.01777852 C39.2433898,2.99509379 39.7296643,3.00076497 40.2131799,3.01281623 C40.9567316,3.06456578 41.706491,3.24108137 42.4155552,3.47359989 C42.6086855,3.53456512 42.784572,3.63097524 42.9556303,3.74014552 C42.5617824,4.55537815 42.1617268,5.37273747 41.7333913,6.16882985 C41.5188787,6.13763834 41.3216099,6.06462185 41.1243411,5.9788452 C40.7125597,5.80162072 40.29595,5.73640211 39.8586478,5.66905681 C39.5896449,5.61801615 39.2896031,5.69528603 39.0302567,5.77184701 C38.757805,5.85620586 38.4846636,6.07383753 38.4570735,6.38362593 C38.4543145,6.5658127 38.4163782,6.79833122 38.5764005,6.92522395 C38.8191929,7.14356452 39.1937277,7.22366998 39.5013567,7.29455978 C40.2249056,7.46044189 41.0284657,7.60151258 41.68166,7.9722662 C42.2736481,8.30496578 42.7832166,8.80647513 43.0499196,9.44716817 Z M5.1276098,0.0510406515 C5.15519985,1.15408584 5.1220918,2.25925773 5.14485358,3.36301181 C5.85253823,3.38711434 6.56160238,3.36301181 7.26997677,3.37648088 C7.28997956,4.47527268 7.28928981,5.59107803 7.26997677,6.68986984 C6.61678247,6.70475669 5.9615189,6.68065416 5.30901435,6.69908551 C5.18141039,6.69554102 5.12967906,6.83235832 5.13864582,6.94578199 C5.12967906,9.45882518 5.15037159,11.9732862 5.12898931,14.4863294 C3.86812426,14.4997984 2.60656947,14.4927094 1.34570443,14.4898738 C1.3291504,14.1496028 1.33121966,13.8093318 1.33259916,13.4690608 C1.33397866,11.5316427 1.33121966,9.59351579 1.33397866,7.65609772 C1.34156592,7.33284026 1.33742742,7.01525399 1.27810882,6.69624992 C0.875983919,6.68490755 0.477307773,6.72531473 0.0938061519,6.64733596 C0.0572493427,6.44104666 0.0358670581,6.23617516 0.0386260626,6.02634137 C0.0434543204,5.36423069 0.0434543204,4.70212002 0.0393158137,4.04000935 C0.035177307,3.83088445 0.0600083472,3.62601295 0.0958754053,3.42043255 C0.48144628,3.34174488 0.873914665,3.38144316 1.28017807,3.37080969 C1.29880135,3.24037247 1.32018364,3.11347974 1.3291504,2.98162472 C1.35329169,2.00689006 1.30293986,1.02577532 1.35260194,0.0517495494 C2.61070798,0.0404071824 3.86950377,0.0439516721 5.1276098,0.0510406515 Z M14.1426569,2.95326881 C14.4461474,2.96957346 14.7482584,3.03053868 15.0483001,3.07803484 C16.2684698,3.27865296 17.4279415,3.83301115 18.360485,4.66596622 C19.2081891,5.45851412 19.8282754,6.5296589 20.0524445,7.68870703 C20.2759238,8.83003271 20.197982,10.0628062 19.7751645,11.1474201 C19.4985743,11.821582 19.1274882,12.4496656 18.5943106,12.9430585 C17.7017727,14.0000254 16.3257192,14.5848662 15.0076048,14.815258 C14.3233717,14.9598732 13.6598311,14.9102503 12.9659415,14.912377 C12.3989661,14.8818944 11.8319907,14.7479127 11.2870873,14.5884107 C10.0365685,14.2084414 8.9219307,13.4080956 8.18182775,12.3015059 C7.23204046,10.890799 6.86716212,8.98386356 7.36792143,7.33284026 C7.66382466,6.28721581 8.24942336,5.26782057 9.08471196,4.58373406 C10.0441558,3.70895401 11.3029516,3.1971297 12.5665756,3.03053868 C13.0907865,2.9227862 13.6122383,2.95043322 14.1426569,2.95326881 Z M13.4094515,6.41623523 C12.3782735,6.48499833 11.4864254,7.42854149 11.2795,8.44155664 C11.2505305,8.67549296 11.2560485,8.91439156 11.2615665,9.14903678 C11.2615665,9.57295775 11.4836663,10.0075122 11.6836942,10.3683412 C11.905794,10.7639063 12.2327361,11.0588078 12.640379,11.2395768 C13.3515124,11.5670876 14.18956,11.5174648 14.8772418,11.154509 C15.5249181,10.7142834 16.0118824,10.0011321 16.1043091,9.19865964 C16.190528,8.27992791 15.8008186,7.26903945 15.0213998,6.7692664 C14.5309868,6.44317335 13.9798756,6.38575262 13.4094515,6.41623523 Z M25.7939328,3.07519925 C26.2105424,3.08370603 26.6664679,3.04188105 27.0692826,3.14679794 C27.6762636,3.27794406 28.2522058,3.52818503 28.7522753,3.90815433 C28.9674777,4.08183432 29.1668157,4.27536346 29.3785693,4.45258794 C29.4282314,4.12791269 29.3965029,3.80181964 29.4247827,3.47643548 C29.5234171,3.35308724 29.7241346,3.37789867 29.8641541,3.37080969 C30.9960357,3.38356986 32.1292968,3.35804953 33.2611784,3.38427875 C33.2715246,7.08330819 33.2687656,10.7837554 33.2625579,14.4827849 C31.9913466,14.5083052 30.7194455,14.482076 29.4482342,14.4962539 C29.3785693,14.1247914 29.4585805,13.766089 29.3275277,13.4038422 C29.0454195,13.6150938 28.8040066,13.8759682 28.5170702,14.0801308 C27.9707873,14.4742781 27.3417343,14.683403 26.685781,14.7783953 C26.3008998,14.8060423 25.9084315,14.8017889 25.5221708,14.7833576 C24.5972146,14.6770229 23.7032971,14.3410053 22.9452607,13.7831026 C22.1334236,13.1387144 21.4850575,12.2887457 21.1119022,11.3033776 C20.5097495,9.8969241 20.5152675,8.21612709 21.0084395,6.77635538 C21.3236558,5.99231426 21.7657863,5.27632735 22.3113794,4.639737 C22.5058892,4.42139644 22.7355763,4.25905881 22.97492,4.09743008 C23.3784244,3.82804886 23.7364052,3.54874307 24.1950897,3.37860757 C24.7137825,3.19074962 25.2407524,3.05393231 25.7939328,3.07519925 Z M27.8893967,6.60834657 C27.4989975,6.4623136 27.0996316,6.44317335 26.6892297,6.48641613 C25.9849938,6.59487751 25.3552511,7.0450277 24.9469184,7.63483079 C24.709644,8.00558441 24.6330816,8.49755958 24.6034223,8.93282291 C24.6544639,9.51128363 24.7751704,10.1840278 25.19178,10.6100754 C25.5325171,11.0063494 25.9739578,11.2984153 26.4836839,11.3969521 C27.3403548,11.5954436 28.3080756,11.31472 28.9060898,10.6469381 C29.2578629,10.1698498 29.5316941,9.54389293 29.4951373,8.93353181 C29.5089323,8.40611174 29.3344253,7.8716027 29.027486,7.44980842 C28.8467712,7.21941659 28.6343279,7.00036713 28.4046408,6.82101595 C28.2473775,6.69837661 28.0728705,6.66505841 27.8893967,6.60834657 Z" id="Combined-Shape"></path></g><g id="p4-link" transform="translate(43.454320, 0.070890)"></g><g id="p5-link" transform="translate(7.104437, 2.906482)"></g><g id="p6-link" transform="translate(20.623558, 3.048261)"></g><g id="p7-link" transform="translate(33.866780, 2.977371)"></g></g></g><g id="p1-link" fill="#FFE803" fill-rule="nonzero"><path d="M10.8308728,0.0168907041 C10.9847272,-0.0056302347 11.1250235,-0.0056302347 11.2788779,0.0168907041 C11.6549665,0.0678591445 12.0304655,0.0186686729 12.4095015,0.0779343014 C13.4245868,0.196465558 14.4797569,0.406265883 15.4235151,0.811050125 C16.1155651,1.07952342 16.7787307,1.44756297 17.3617269,1.91042753 C17.7525524,2.26009474 18.1634203,2.64591398 18.4263286,3.10462994 C18.9026288,3.89938202 18.9527346,4.94542036 18.5831304,5.79173354 C18.442834,6.1188798 18.2194209,6.37194404 18.0254819,6.66353093 C17.884596,6.86681203 17.9293965,7.07187111 17.9217333,7.30537769 C17.9270386,9.75541876 17.9211438,12.2048672 17.9246807,14.6543156 C17.9217333,14.9050092 17.944723,15.1503689 17.8616063,15.3886167 C17.7301521,15.7655461 17.4495594,16.0867658 17.0911553,16.2604141 C16.1450392,16.7286126 15.2065863,17.2134054 14.2616491,17.6845672 C13.9680878,17.8315459 13.6963373,17.998675 13.3567966,17.9974897 C9.83877714,17.9957117 6.32016824,17.996897 2.80214882,17.996897 C2.41250223,17.9903778 2.072372,18.0454949 1.70807307,17.86592 C1.33670038,17.7011616 1.12684533,17.3663108 1.00069651,16.9923446 C0.918758727,16.7535042 0.944106387,16.5057738 0.941158985,16.2544876 C0.944106387,13.7250306 0.939390543,11.1937956 0.943516906,8.66433854 C0.945285348,8.58670057 0.937032621,8.51202588 0.918169246,8.43912916 C0.836231462,8.2637029 0.678840177,8.12383601 0.573912654,7.95967022 C0.217866452,7.37175519 -0.0397365113,6.76191187 0.00506400414,6.05724355 C0.0646015312,5.51851899 0.220813855,5.00172271 0.550333435,4.56552768 C0.819726009,4.21645313 1.06966573,3.8644153 1.41215388,3.59534935 C1.83893773,3.25694261 2.29460614,2.92505509 2.78505388,2.68562195 C3.27373319,2.44441084 3.74531756,2.17890083 4.25698661,1.9880655 C5.03156394,1.6342497 5.77195141,1.17908968 6.56598159,0.866759815 C7.55395086,0.413377758 8.68280595,0.195280246 9.75624988,0.0708224259 C10.1176014,0.0222246107 10.4736476,0.0654885194 10.8308728,0.0168907041 Z M13.5743149,8.19969602 C13.689853,7.6888263 14.082447,7.48969379 14.2964284,7.03453376 C14.536347,6.57759577 14.5835054,6.03531527 14.354787,5.56415352 C14.0641731,4.96438536 13.5495567,4.46418346 12.9983924,4.1044411 C11.8453687,3.36539871 10.5155007,3.01276822 9.17148525,2.83793462 C8.98344099,2.82608149 8.8048284,2.83556399 8.61855258,2.80178258 C8.35918117,2.75437008 8.07682003,2.77155711 7.81273278,2.76859383 C7.54805605,2.77214977 7.26746335,2.75437008 7.00691298,2.80059727 C6.80059482,2.83911993 6.60252938,2.82430352 6.39444278,2.8408979 C5.42003157,2.97720884 4.46448373,3.2041962 3.55550485,3.58823747 C2.83339128,3.90827187 2.1537203,4.3266872 1.63910386,4.93830849 C1.30133155,5.35553851 1.04844443,5.92685917 1.13568754,6.47328826 C1.21585688,6.8442911 1.3844483,7.18803174 1.62849321,7.47843332 C1.79001086,7.67163927 1.94209682,7.84765819 2.01519239,8.09538851 C2.08239317,8.28977977 2.05763499,8.52269369 2.06176135,8.72834542 C2.05940343,11.1973515 2.06176135,13.6663576 2.06058239,16.1359563 C2.06294031,16.3196798 2.04938226,16.5081445 2.07355096,16.6906826 C2.16963628,16.838254 2.33940665,16.8672942 2.50269274,16.8696648 C6.03662814,16.8678868 9.58883743,16.8684795 13.1227728,16.8696648 C13.3190698,16.8684795 13.5908203,16.7967681 13.5607568,16.5466671 C13.5607568,13.9603151 13.5613463,11.3739631 13.5607568,8.7870184 C13.5631147,8.59262713 13.5501462,8.39349462 13.5743149,8.19969602 Z" id="p1"></path></g></g></g><g id="Screen-Shot-2021-04-16-at-11.51.52-PM" transform="translate(62.000000, 12.000000)" fill="#FFE803"><path d="M6.2766562,0.0688414148 C6.496292,0.0862680526 6.70502176,0.181833485 6.82741191,0.356099863 C6.95222564,0.53036624 6.96222286,0.73751837 6.9216281,0.937924704 C6.86528016,1.20691329 6.6907833,1.45875631 6.49023309,1.65578975 C6.13063626,2.01837624 5.64713454,2.30507254 5.2208896,2.60104431 C5.40144538,2.59064454 5.58169822,2.59486066 5.76134516,2.5754665 C6.01642564,2.59879571 6.25878239,2.58727164 6.50840984,2.65641605 C6.60262603,2.68761535 6.67321243,2.76575414 6.66260932,2.8621628 C6.65745924,2.97740347 6.56081949,3.08336867 6.4296439,3.07324998 C6.26665898,3.05638549 6.1085212,3.02321866 5.94341567,3.02125114 C5.52080608,3.01085137 5.08274626,3.02715371 4.66983094,3.11737872 C4.58318841,3.13424321 4.51441968,3.19439322 4.42868598,3.18961495 C4.29084557,3.19186354 4.16997015,3.07465535 4.17784674,2.94704739 C4.19026752,2.86300603 4.25267439,2.81325579 4.31599009,2.7595705 C4.81888034,2.32109381 5.42446928,1.96581526 5.94190094,1.54083016 C6.14063347,1.3662827 6.35723982,1.16615744 6.44479119,0.919092692 C6.47902409,0.810878893 6.51022752,0.65966065 6.41601133,0.569435638 C6.32906585,0.487080721 6.17819877,0.490734693 6.06459404,0.506193807 C5.82344908,0.527555492 5.61047808,0.631834244 5.43264882,0.780803889 C5.44204014,0.869904602 5.45052263,0.949167696 5.3778156,1.0183121 C5.2920819,1.09954272 5.17090353,1.09532659 5.05972237,1.07199738 C4.92794088,1.00735018 4.87189588,0.857256236 4.91430832,0.727399677 C4.94945004,0.61693728 5.04669569,0.531771614 5.13394412,0.454194969 C5.43931363,0.188579281 5.85737902,0.0421393086 6.2766562,0.0688414148 Z M3.88792748,0.552852225 C3.98638491,0.635488217 4.02122369,0.778274216 4.03334153,0.895763484 C4.05727426,1.16924927 3.96972288,1.4444215 3.83885024,1.68698905 C3.90065121,1.80279187 4.00032042,1.93152413 4.15997293,1.89638978 C4.30387225,1.8660337 4.41656814,1.69795097 4.53380822,1.6206554 C4.64923062,1.5838346 4.75647348,1.61194208 4.8258481,1.70666429 C4.89098148,1.795765 4.87704597,1.89526548 4.79646235,1.97059353 C4.64650411,2.11984425 4.46473654,2.28399193 4.24207128,2.32615315 C3.99486739,2.38377349 3.7331221,2.29073773 3.57589316,2.10747696 C3.53469251,2.13361691 3.50712443,2.16959449 3.47743573,2.20557206 C3.31990384,2.4014812 3.13480387,2.58277445 2.94364499,2.75029503 C2.66342,2.98667894 2.34926506,3.22531145 1.99784777,3.36219488 C1.85818969,3.42122058 1.69550772,3.41222619 1.57947943,3.31441216 C1.45920989,3.21153878 1.41952397,3.03671025 1.41195032,2.89167566 C1.402559,2.57687188 1.45951284,2.26178702 1.54373181,1.95822624 C1.57766175,1.80925659 1.63582737,1.66703274 1.6676367,1.51778202 C1.47738665,1.70413462 1.27350403,1.87840099 1.08113336,2.06250499 C1.02387658,2.11647135 0.970558093,2.16594052 0.883612609,2.17071879 C0.749104612,2.16537837 0.619140805,2.03580288 0.646708885,1.90791385 C0.661553236,1.84129912 0.717598235,1.78986243 0.766675477,1.74264186 C1.06265366,1.46662641 1.36378192,1.15519553 1.70550494,0.92949246 C1.80578004,0.868780303 1.90908461,0.802727724 2.03541307,0.820716511 C2.14356477,0.833364877 2.22384544,0.910941523 2.24868701,1.00763125 C2.28352579,1.13889319 2.23566033,1.2948897 2.2044569,1.42446519 C2.07903728,1.85507178 1.91908183,2.24379824 1.88060769,2.69464222 C1.8760635,2.77868359 1.86606629,2.8576656 1.89999623,2.938053 C2.04268377,2.88802168 2.16749749,2.78655368 2.28897882,2.70251231 C2.68432326,2.40541625 3.05785561,2.05519704 3.3308099,1.65466545 C3.26719125,1.40029275 3.23174658,1.11781258 3.3044536,0.862034507 C3.33565703,0.75213426 3.3901873,0.629304571 3.48500938,0.553976524 C3.59467581,0.461783989 3.77886694,0.457286792 3.88792748,0.552852225 Z" id="Combined-Shape"></path></g></g></g></svg>
            </router-link>
            <router-link
              v-if="space"
              :to="{ name: 'proposals' }"
              class="d-inline-block d-flex flex-items-center"
              style="font-size: 24px; padding-top: 4px;"
            >
              <span class="pl-1 pr-1 text-gray" v-text="'/'" />
              <Token :space="space.key" symbolIndex="space" size="28" />
              <span class="ml-0" v-text="space.name" />
            </router-link>
          </div>
          <div :key="web3.account">
            <template v-if="$auth.isAuthenticated">
              <UiButton
                @click="modalOpen = true"
                class="button-header"
                :loading="loading"
              >
                <Avatar
                  :address="web3.account"
                  size="16"
                  class="mr-0 mr-sm-2 mr-md-2 mr-lg-2 mr-xl-2 ml-n1"
                />
                <span v-if="web3.name" v-text="web3.name" class="hide-sm" />
                <span v-else v-text="_shorten(web3.account)" class="hide-sm white" />
              </UiButton>
            </template>
            <UiButton
              v-if="!$auth.isAuthenticated"
              @click="modalOpen = true"
              class="button-header white"
              :loading="loading"
            >
              Connect<span class="hide-sm" v-text="' wallet'" />
            </UiButton>
            <UiButton @click="modalAboutOpen = true" class="ml-2 button-header white">
              <span v-text="'?'" class="ml-n1 mr-n1" />
            </UiButton>
          </div>
        </div>
        <ModalAccount
          :open="modalOpen"
          @close="modalOpen = false"
          @login="handleLogin"
        />
        <ModalAbout :open="modalAboutOpen" @close="modalAboutOpen = false" />
      </Container>
    </nav>
  </Sticky>
</template>

<script>
import { mapActions } from 'vuex';

export default {
  data() {
    return {
      loading: false,
      modalOpen: false,
      modalAboutOpen: false,
    };
  },
  computed: {
    space() {
      try {
        return this.web3.spaces[this.$route.params.key];
      } catch (e) {
        return false;
      }
    },
  },
  methods: {
    ...mapActions(['login']),
    async handleLogin(connector) {
      this.modalOpen = false;
      this.loading = true;
      await this.login(connector);
      this.loading = false;
    },
  },
};
</script>
